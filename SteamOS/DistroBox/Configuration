# set password if not already done
passwd

# On Konsole
sudo steamos-readonly disable 
sudo pacman-key --init 
sudo pacman-key --populate archlinux 
sudo pacman -Sy 
sudo pacman -S podman
sudo pacman -S fuse-overlayfs
sudo steamos-readonly enable

# RE-DO THIS AT EVERY STEAMOS UPGRADE!

# For External Use:
mkdir -p /run/media/mmcblk0p1/DistroBox/Volumes

On SteamOS Konsole:
curl -s https://raw.githubusercontent.com/89luca89/distrobox/main/install | sh -s -- --prefix /run/media/mmcblk0p1/DistroBox

TO BASHRC:
[ -d /run/media/mmcblk0p1/DistroBox ] && {
  export PATH=/run/media/mmcblk0p1/DistroBox/bin:$PATH
  xhost +si:localuser:$USER
  }
###sudo xhost +?

# Setup subuid/subgid
sudo touch /etc/subuid
sudo touch /etc/subgid
sudo chmod 664 /etc/subuid /etc/subgid

sudo usermod --add-subuids 10000-75535 deck 
sudo usermod --add-subgids 10000-75535 deck

Edit /etc/containers/storage.conf:
[storage.options.overlay] mountopt = "nodev,index=off"
[storage] graphroot = "/run/media/mmcblk0p1/DistroBox/Volumes"
[storage] runroot = "/run/media/mmcblk0p1/DistroBox/Storage"
[storage.options.overlay] mount_program = "/usr/bin/fuse-overlayfs"

That's all folks!
